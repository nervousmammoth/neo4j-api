---
**Status:** To Do
**Priority:** P0
**Branch:** `feature/P0.2-Setup-App-Structure`
---

## Overview

Setup Application Directory Structure
**Phase:** 0 - Foundation

Create the `app/` directory structure with empty module files and basic `__init__.py` files. This establishes the FastAPI application skeleton that will be populated in subsequent issues.

## Related Specifications
- [ ] **Reference:** `CLAUDE.md` - Architecture section (lines 26-57)
- [ ] **Reference:** `IMPLEMENTATION_PLAN.md` - Directory structure

## Related BDD Tests
N/A - Structural setup task

## Dependencies
None

---

## TDD Workflow Checklist

### 1Ô∏è‚É£ Structure Task (No Tests Required)
- [ ] Review planned application structure from CLAUDE.md
- [ ] Review IMPLEMENTATION_PLAN.md for app/ structure
- [ ] Plan directory hierarchy

### 2Ô∏è‚É£ Create Directory Structure
- [ ] Create `app/` root directory
- [ ] Create `app/__init__.py`
- [ ] Create `app/routers/` directory
- [ ] Create `app/routers/__init__.py`
- [ ] Create `app/utils/` directory
- [ ] Create `app/utils/__init__.py`

### 3Ô∏è‚É£ Create Placeholder Module Files
- [ ] Create `app/main.py` (empty with docstring)
- [ ] Create `app/config.py` (empty with docstring)
- [ ] Create `app/models.py` (empty with docstring)
- [ ] Create `app/dependencies.py` (empty with docstring)
- [ ] Create `app/routers/health.py` (empty with docstring)
- [ ] Create `app/routers/search.py` (empty with docstring)
- [ ] Create `app/routers/query.py` (empty with docstring)
- [ ] Create `app/routers/nodes.py` (empty with docstring)
- [ ] Create `app/routers/schema.py` (empty with docstring)
- [ ] Create `app/utils/neo4j_client.py` (empty with docstring)
- [ ] Create `app/utils/validators.py` (empty with docstring)

### 4Ô∏è‚É£ Verification
- [ ] Verify all directories exist
- [ ] Verify all __init__.py files exist
- [ ] Verify Python can import app module
- [ ] Run pre-commit hooks

---

## Acceptance Criteria

### Functional Requirements
- [ ] `app/` directory exists
- [ ] `app/routers/` directory exists
- [ ] `app/utils/` directory exists
- [ ] All `__init__.py` files created
- [ ] All planned module files created (empty but with docstrings)
- [ ] Python can import from app module

### Non-Functional Requirements
- [ ] Follows Python package conventions
- [ ] Clean directory structure
- [ ] Docstrings in all module files
- [ ] Type hints ready (from __future__ import annotations)
- [ ] No linting errors

---

## Implementation Notes

### Directory Structure to Create

```
app/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ main.py                     # FastAPI application entry point
‚îú‚îÄ‚îÄ config.py                   # Settings and configuration
‚îú‚îÄ‚îÄ models.py                   # Pydantic request/response models
‚îú‚îÄ‚îÄ dependencies.py             # Dependency injection (API key auth)
‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ health.py               # Health & database endpoints
‚îÇ   ‚îú‚îÄ‚îÄ search.py               # Node/edge search endpoints
‚îÇ   ‚îú‚îÄ‚îÄ query.py                # Cypher query execution
‚îÇ   ‚îú‚îÄ‚îÄ nodes.py                # Node operations
‚îÇ   ‚îî‚îÄ‚îÄ schema.py               # Schema discovery
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ neo4j_client.py         # Neo4j driver wrapper
    ‚îî‚îÄ‚îÄ validators.py           # Query validation (read-only check)
```

### Template for __init__.py Files

**app/__init__.py:**
```python
"""Neo4j API - Linkurious-compatible REST API for Neo4j Enterprise.

This package provides a read-only REST API for Neo4j multi-database instances
with Linkurious-compatible response formats.
"""

__version__ = "1.0.0"
```

**app/routers/__init__.py:**
```python
"""API route handlers for different endpoint groups."""
```

**app/utils/__init__.py:**
```python
"""Utility modules for Neo4j client and query validation."""
```

### Template for Module Files

Each module file should have a module-level docstring and basic structure:

**Example (app/main.py):**
```python
"""FastAPI application entry point.

This module contains the FastAPI application instance, lifespan management,
and router registration.
"""

from __future__ import annotations

# Implementation will be added in subsequent issues
```

**Example (app/config.py):**
```python
"""Application configuration and settings.

This module provides configuration management using pydantic-settings,
loading values from environment variables.
"""

from __future__ import annotations

# Implementation will be added in issue #04
```

**Example (app/dependencies.py):**
```python
"""FastAPI dependency injection functions.

This module provides dependencies for authentication, database connections,
and other cross-cutting concerns.
"""

from __future__ import annotations

# Implementation will be added in issue #08
```

**Example (app/models.py):**
```python
"""Pydantic models for request and response data.

This module contains all data models following Linkurious API format.
"""

from __future__ import annotations

# Implementation will be added in multiple issues (07, 13, 17, 21, 26)
```

**Example (app/routers/health.py):**
```python
"""Health and database listing endpoints.

Endpoints:
- GET /api/health - Health check and Neo4j connectivity
- GET /api/databases - List all available Neo4j databases
"""

from __future__ import annotations

# Implementation will be added in issues #10-11
```

**Example (app/routers/query.py):**
```python
"""Cypher query execution endpoint.

Endpoints:
- POST /api/{database}/graph/query - Execute read-only Cypher queries
"""

from __future__ import annotations

# Implementation will be added in issues #14-15
```

**Example (app/routers/search.py):**
```python
"""Node and edge search endpoints.

Endpoints:
- GET /api/{database}/search/node/full - Search nodes with fuzzy matching
- GET /api/{database}/search/edge/full - Search relationships
"""

from __future__ import annotations

# Implementation will be added in issues #18-19
```

**Example (app/routers/nodes.py):**
```python
"""Node operation endpoints.

Endpoints:
- GET /api/{database}/graph/nodes/{node_id} - Get node by ID
- POST /api/{database}/graph/nodes/expand - Expand node neighborhoods
- GET /api/{database}/graph/nodes/count - Count all nodes
- GET /api/{database}/graph/edges/count - Count all relationships
"""

from __future__ import annotations

# Implementation will be added in issues #22-24
```

**Example (app/routers/schema.py):**
```python
"""Schema discovery endpoints.

Endpoints:
- GET /api/{database}/graph/schema/node/types - Get all node labels
- GET /api/{database}/graph/schema/edge/types - Get all relationship types
"""

from __future__ import annotations

# Implementation will be added in issues #27-28
```

**Example (app/utils/neo4j_client.py):**
```python
"""Neo4j database client wrapper.

This module provides a wrapper around the Neo4j Python driver with
multi-database support and connection pooling.
"""

from __future__ import annotations

# Implementation will be added in issue #05
```

**Example (app/utils/validators.py):**
```python
"""Query validation utilities.

This module provides read-only query validation to ensure no write
operations (CREATE, DELETE, MERGE, SET, REMOVE) are executed.
"""

from __future__ import annotations

# Implementation will be added in issue #06
```

### Files to Create

Run these commands to create the structure:

```bash
# Create directory structure
mkdir -p app/routers app/utils

# Create __init__.py files
touch app/__init__.py
touch app/routers/__init__.py
touch app/utils/__init__.py

# Create module files
touch app/main.py
touch app/config.py
touch app/models.py
touch app/dependencies.py
touch app/routers/health.py
touch app/routers/search.py
touch app/routers/query.py
touch app/routers/nodes.py
touch app/routers/schema.py
touch app/utils/neo4j_client.py
touch app/utils/validators.py
```

### Verification Steps

1. **Import test:**
```bash
python3 -c "import app; print(f'‚úì app module version: {app.__version__}')"
```

2. **Structure verification:**
```bash
find app/ -type f -name "*.py" | sort
```

Expected output:
```
app/__init__.py
app/config.py
app/dependencies.py
app/main.py
app/models.py
app/routers/__init__.py
app/routers/health.py
app/routers/nodes.py
app/routers/query.py
app/routers/schema.py
app/routers/search.py
app/utils/__init__.py
app/utils/neo4j_client.py
app/utils/validators.py
```

3. **Linting check:**
```bash
ruff check app/
black --check app/
```

---

## Git Workflow

### Start Issue
```bash
git checkout main
git pull origin main
git checkout -b feature/P0.2-setup-app-structure
```

### During Development
```bash
# Create directory structure
mkdir -p app/routers app/utils

# Create and populate __init__.py files
# ... (see implementation notes above)

# Create module files with docstrings
# ... (see implementation notes above)

# Verify structure
find app/ -type f -name "*.py" | sort

# Test imports
python3 -c "import app; print('‚úì app module imports successfully')"

# Run code quality checks
black app/
ruff check app/ --fix

# Stage and commit
git add app/
git commit -m "feat(P0.2): setup app directory structure with module skeletons"

# Push
git push origin feature/P0.2-setup-app-structure
```

### Create Pull Request
```bash
gh pr create \
  --title "feat: setup app directory structure" \
  --body "$(cat <<'EOF'
## Summary
- Created app/ directory structure
- Added all planned module files with docstrings
- Established FastAPI application skeleton

## Changes
- Created app/ with routers/ and utils/ subdirectories
- Added __init__.py for all packages
- Created placeholder modules: main, config, models, dependencies
- Created router modules: health, search, query, nodes, schema
- Created utility modules: neo4j_client, validators
- All modules have docstrings and ready for implementation

## Testing
- [x] Directory structure created correctly
- [x] All __init__.py files present
- [x] Python can import app module
- [x] No linting errors
- [x] All files have proper docstrings

## Closes
Closes #02

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
EOF
)"
```

### After Merge
```bash
mv issues/P0.2-setup-app-structure.md issues/completed/
git checkout main
git pull origin main
```

---

## Verification Commands

```bash
# List app structure
find app/ -type f -name "*.py" | sort

# Count files (should be 14)
find app/ -type f -name "*.py" | wc -l

# Test imports
python3 -c "import app; from app import routers, utils; print('‚úì All imports work')"

# Check for docstrings in all files
find app/ -name "*.py" -exec grep -L '"""' {} \; || echo "‚úì All files have docstrings"

# Verify no syntax errors
python3 -m py_compile app/**/*.py

# Run linting
ruff check app/
black --check app/
```

---

## References
- **Architecture:** `CLAUDE.md` - Lines 26-57 (Directory Structure)
- **Implementation Plan:** `IMPLEMENTATION_PLAN.md` - App structure details

---

## Notes
- All module files are created empty with docstrings only
- Actual implementation will happen in subsequent issues
- This provides a clean structure for TDD development
- The `from __future__ import annotations` import enables modern type hints
- Each module docstring references which issue(s) will implement it
- This allows parallel work on different modules once dependencies are ready
